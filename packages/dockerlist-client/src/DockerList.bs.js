// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Curry from "rescript/lib/es6/curry.js";
import * as React from "react";
import * as Caml_option from "rescript/lib/es6/caml_option.js";
import * as DockerListModuleCss from "./DockerList.module.css";
import * as DockerApi$MdworldHomeremoteDockerlist from "./DockerApi.bs.js";
import * as DockerListItem$MdworldHomeremoteDockerlist from "./DockerListItem.bs.js";

var styles = DockerListModuleCss;

function DockerList$DockerListMod(Props) {
  var url = Props.url;
  var onError = Props.onError;
  var confirmButtonStyleOpt = Props.confirmButtonStyle;
  var confirmButtonStyle = confirmButtonStyleOpt !== undefined ? Caml_option.valFromOption(confirmButtonStyleOpt) : ({
        backgroundColor: "darkblue",
        color: "white"
      });
  var match = React.useState(function () {
        return [];
      });
  var setContainers = match[1];
  React.useEffect((function () {
          var update = function (param) {
            DockerApi$MdworldHomeremoteDockerlist.getDockerList(url, onError).then(function (containerList) {
                  Curry._1(setContainers, (function (_prev) {
                          return containerList;
                        }));
                  return Promise.resolve(containerList);
                });
            
          };
          update(undefined);
          var interval = setInterval(update, 60000);
          return (function (param) {
                    clearInterval(interval);
                    
                  });
        }), []);
  var dockerContainersElems = match[0].map(function (dockerContainer) {
        return React.createElement(DockerListItem$MdworldHomeremoteDockerlist.make, {
                    url: url,
                    container: dockerContainer,
                    setContainers: setContainers,
                    confirmButtonStyle: confirmButtonStyle,
                    onError: onError,
                    key: dockerContainer.Id
                  });
      });
  return React.createElement("div", {
              className: styles.root
            }, React.createElement("div", {
                  className: styles["button-list"]
                }, dockerContainersElems));
}

var DockerListMod = {
  make: DockerList$DockerListMod
};

export {
  styles ,
  DockerListMod ,
  
}
/* styles Not a pure module */
